{"ast":null,"code":"import X2JS from \"x2js\";\n// Used as a workaround for Cross Origin Security Policy\nconst ALL_ORIGINS_BASE_URL = \"https://api.allorigins.win/get?url=\";\nconst x2js = new X2JS();\nexport const getNews = async category => {\n  console.log(\"fetching\", ALL_ORIGINS_BASE_URL + category.url);\n  const resRaw = await fetch(ALL_ORIGINS_BASE_URL + category.url);\n  const resJson = await resRaw.json();\n  const resXml = resJson.contents;\n  return x2js.xml2js(resXml);\n};","map":{"version":3,"sources":["/Users/matteolobello/Developer/Matteo/ansa-reader/src/api/api.ts"],"names":["X2JS","ALL_ORIGINS_BASE_URL","x2js","getNews","category","console","log","url","resRaw","fetch","resJson","json","resXml","contents","xml2js"],"mappings":"AAAA,OAAOA,IAAP,MAAiB,MAAjB;AAIA;AACA,MAAMC,oBAAoB,GAAG,qCAA7B;AAEA,MAAMC,IAAI,GAAG,IAAIF,IAAJ,EAAb;AAEA,OAAO,MAAMG,OAAO,GAAG,MAAOC,QAAP,IAA+B;AAClDC,EAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBL,oBAAoB,GAAGG,QAAQ,CAACG,GAAxD;AACA,QAAMC,MAAM,GAAG,MAAMC,KAAK,CAACR,oBAAoB,GAAGG,QAAQ,CAACG,GAAjC,CAA1B;AACA,QAAMG,OAAO,GAAG,MAAMF,MAAM,CAACG,IAAP,EAAtB;AACA,QAAMC,MAAM,GAAGF,OAAO,CAACG,QAAvB;AAEA,SAAOX,IAAI,CAACY,MAAL,CAA6BF,MAA7B,CAAP;AACH,CAPM","sourcesContent":["import X2JS from \"x2js\"\nimport { ICategory } from \"../models/ICategory\"\nimport { IArticle } from \"../models/IArticle\"\n\n// Used as a workaround for Cross Origin Security Policy\nconst ALL_ORIGINS_BASE_URL = \"https://api.allorigins.win/get?url=\"\n\nconst x2js = new X2JS()\n\nexport const getNews = async (category: ICategory) => {\n    console.log(\"fetching\", ALL_ORIGINS_BASE_URL + category.url)\n    const resRaw = await fetch(ALL_ORIGINS_BASE_URL + category.url)\n    const resJson = await resRaw.json()\n    const resXml = resJson.contents\n\n    return x2js.xml2js<Array<IArticle>>(resXml)\n}\n"]},"metadata":{},"sourceType":"module"}