{"ast":null,"code":"import X2JS from \"x2js\";\n// Used as a workaround for Cross Origin Security Policy\nconst ALL_ORIGINS_BASE_URL = \"https://api.allorigins.win/get?url=\";\nconst x2js = new X2JS();\nexport const getNews = async category => {\n  const resRaw = await fetch(ALL_ORIGINS_BASE_URL + category.url);\n  const resJson = await resRaw.json();\n  console.log(\"fetching\", ALL_ORIGINS_BASE_URL + category.url);\n  console.log(\"res\", resJson);\n  const resXml = resJson.contents;\n  console.log(\"resXml\", resXml);\n  return x2js.xml2js(resXml);\n};","map":{"version":3,"sources":["/Users/matteolobello/Developer/Matteo/ansa-reader/src/api/api.ts"],"names":["X2JS","ALL_ORIGINS_BASE_URL","x2js","getNews","category","resRaw","fetch","url","resJson","json","console","log","resXml","contents","xml2js"],"mappings":"AAAA,OAAOA,IAAP,MAAiB,MAAjB;AAIA;AACA,MAAMC,oBAAoB,GAAG,qCAA7B;AAEA,MAAMC,IAAI,GAAG,IAAIF,IAAJ,EAAb;AAEA,OAAO,MAAMG,OAAO,GAAG,MAAOC,QAAP,IAA+B;AAClD,QAAMC,MAAM,GAAG,MAAMC,KAAK,CAACL,oBAAoB,GAAGG,QAAQ,CAACG,GAAjC,CAA1B;AACA,QAAMC,OAAO,GAAG,MAAMH,MAAM,CAACI,IAAP,EAAtB;AAEAC,EAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBV,oBAAoB,GAAGG,QAAQ,CAACG,GAAxD;AACAG,EAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAmBH,OAAnB;AAEA,QAAMI,MAAM,GAAGJ,OAAO,CAACK,QAAvB;AAEAH,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBC,MAAtB;AAEA,SAAOV,IAAI,CAACY,MAAL,CAA6BF,MAA7B,CAAP;AACH,CAZM","sourcesContent":["import X2JS from \"x2js\"\nimport { ICategory } from \"../models/ICategory\"\nimport { IArticle } from \"../models/IArticle\"\n\n// Used as a workaround for Cross Origin Security Policy\nconst ALL_ORIGINS_BASE_URL = \"https://api.allorigins.win/get?url=\"\n\nconst x2js = new X2JS()\n\nexport const getNews = async (category: ICategory) => {\n    const resRaw = await fetch(ALL_ORIGINS_BASE_URL + category.url)\n    const resJson = await resRaw.json()\n\n    console.log(\"fetching\", ALL_ORIGINS_BASE_URL + category.url)\n    console.log(\"res\", resJson)\n\n    const resXml = resJson.contents\n\n    console.log(\"resXml\", resXml)\n\n    return x2js.xml2js<Array<IArticle>>(resXml)\n}\n"]},"metadata":{},"sourceType":"module"}